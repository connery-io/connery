# Set up runner

On this page you will learn how to set up runner using GitHub Codespaces.

:::note
The GitHub Codespaces are free up to a fixed amount of usage every month.
Learn more about [billing for GitHub Codespaces](https://docs.github.com/en/billing/managing-billing-for-github-codespaces/about-billing-for-github-codespaces).
:::

## 1. Create GitHub Codespace

Use the link below to create a new GitHub Codespace from the [connery-io/connery](https://github.com/connery-io/connery) repository.
It takes around 2 minutes to create a new codespace, install dependencies, build the project, and prepare everything you need to start the runner.

[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://github.com/codespaces/new/connery-io/connery?quickstart=1)

Also, you can use the green "Code" button in the top right corner of the repository, then open "Codespaces" tab and click "Create codespace on main".

## 2. Configure ENV variables

After the codespace is created, you will see that the `.env` file is already precreated with a unique `CONNERY_RUNNER_API_KEY`.
This is the key which the runner uses to protect the API.
You will use it later to configure clients to work with the runner.

We also recommend to configure the `OPENAI_API_KEY` variable in the `.env` file.
Runner uses it for the Natural Language Actions feature to access the OpenAI API and classify the user intent.
You can get it from [your OpenAI account](https://platform.openai.com/account/api-keys).
This variable is not required to start the runner, however some clients that are completely based on natural language like [Slack App](/docs/native-clients/slack) won't work without it.

## 3. Start runner

Open a new terminal window and run the following command to start the runner.

```
yarn start
```

It will start the runner on port 4201.

## 4. Expose the runner to the internet

![Change Port Visibility](/img/set-up-runner/change-port-visibility.png)

At the moment the runner is running on your local machine and is not accessible from the internet.
On the next steps of this guide we will configure clients to call action from your runner. To do that, the runner has to be accessible from the internet.

To expose the runner to the internet, we will use [ngrok](https://ngrok.com/).

Open a new terminal window and run the following command:

```
npx ngrok http 4201
```

This will automatically download and start ngrok and the runner will be accessible from the internet.
You will see you a public URL that you can use to access the runner from the internet.

NOTE: The runner process has to be running in the terminal window where you started it. If you close that terminal window, the runner will stop.

To verify that the runner is accessible from the internet, use the following command in the terminal:

```
curl -I <HTTPS_NGROK_URL>/health
```

Replace `<HTTPS_NGROK_URL>` with the HTTPS URL that you got from ngrok.

If you see `200 OK` status, it means that the runner is accessible from the internet.

## 6. Test if runner is up and running

To check if the runner is up and running, use the following command in the terminal:

```
curl -I 'http://localhost:4201/health'
```

If you see `200 OK` status, it means that the runner is up and running.

To check if you can access the protected API use the following command in the terminal:

```
curl -I 'http://localhost:4201/verify-access' \
-H 'x-api-key: <CONNERY_RUNNER_API_KEY>'
```

Replace `<CONNERY_RUNNER_API_KEY>` with the value of the `CONNERY_RUNNER_API_KEY` variable from the `.env` file.

If you see `200 OK` status, it means that you can access the protected API.

## Next steps

Now, when you have the runner up and running, let's [install connector](/docs/quick-start/install-connector-on-the-runner) on it.

---

TODO:

- mention devcontainer
- mention that the dependencies are already preinstalled and the project is pre-build
- .env is preconfigured
- when in config, mention that secrets are pulled from .env file
